<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UR20 Swarm Control Dashboard v3.0.0</title>
    <style>
        /* ===== DESIGN SYSTEM - Apple-Inspired Premium Quality ===== */
        :root {
            /* Primary Colors from Design Brief */
            --primary-teal: #32B8C6;
            --accent-green: #73C000;
            --accent-dark-gray: #3E424C;
            --accent-lime: #C3C395;
            
            /* Status Colors */
            --status-success: #73C000;
            --status-error: #FF5459;
            --status-warning: #FFB946;
            --status-info: #32B8C6;
            
            /* Neutrals - Light Mode */
            --bg-primary: #F8F9FA;
            --bg-secondary: #FFFFFF;
            --bg-tertiary: #F1F3F5;
            --text-primary: #1A1A1A;
            --text-secondary: #6B7280;
            --text-tertiary: #9CA3AF;
            --border-color: #E5E7EB;
            --border-focus: var(--primary-teal);
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.12);
            
            /* Typography */
            --font-system: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            --font-mono: 'SF Mono', 'Consolas', 'Monaco', monospace;
            
            /* Spacing Grid */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            
            /* Border Radius */
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-full: 9999px;
            
            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Layout */
            --sidebar-width: 280px;
            --header-height: 64px;
        }
        
        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-primary: #0F1419;
                --bg-secondary: #1A1F29;
                --bg-tertiary: #252B36;
                --text-primary: #F8F9FA;
                --text-secondary: #9CA3AF;
                --text-tertiary: #6B7280;
                --border-color: #2D3748;
            }
        }
        
        [data-theme="dark"] {
            --bg-primary: #0F1419;
            --bg-secondary: #1A1F29;
            --bg-tertiary: #252B36;
            --text-primary: #F8F9FA;
            --text-secondary: #9CA3AF;
            --text-tertiary: #6B7280;
            --border-color: #2D3748;
        }
        
        /* ===== BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-system);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 14px;
            line-height: 1.5;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* ===== LAYOUT ===== */
        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }
        
        /* ===== SIDEBAR ===== */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: transform var(--transition-base);
            z-index: 100;
        }
        
        .sidebar.collapsed {
            transform: translateX(calc(-1 * var(--sidebar-width)));
        }
        
        .sidebar-header {
            padding: var(--space-lg);
            border-bottom: 1px solid var(--border-color);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-teal), var(--accent-green));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 20px;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: var(--space-md);
            overflow-y: auto;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            margin-bottom: var(--space-xs);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-weight: 500;
            position: relative;
        }
        
        .nav-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }
        
        .nav-item.active {
            background: var(--primary-teal);
            color: white;
            box-shadow: var(--shadow-md);
        }
        
        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 24px;
            background: white;
            border-radius: 0 2px 2px 0;
        }
        
        .nav-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }
        
        .sidebar-footer {
            padding: var(--space-lg);
            border-top: 1px solid var(--border-color);
            font-size: 12px;
            color: var(--text-tertiary);
        }
        
        .connection-status {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-top: var(--space-sm);
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--status-success);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* ===== MAIN CONTENT ===== */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .content-header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: var(--space-lg) var(--space-xl);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .content-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .content-subtitle {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: var(--space-xs);
        }
        
        .header-actions {
            display: flex;
            gap: var(--space-md);
            align-items: center;
        }
        
        /* ===== TABS ===== */
        .tabs-container {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            padding: 0 var(--space-xl);
            display: flex;
            gap: var(--space-md);
        }
        
        .tab {
            padding: var(--space-md) var(--space-lg);
            cursor: pointer;
            color: var(--text-secondary);
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: all var(--transition-fast);
            position: relative;
        }
        
        .tab:hover {
            color: var(--text-primary);
        }
        
        .tab.active {
            color: var(--primary-teal);
            border-bottom-color: var(--primary-teal);
        }
        
        /* ===== CONTENT BODY ===== */
        .content-body {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-xl);
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        /* ===== HERO STATS BAR ===== */
        .hero-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }
        
        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            transition: all var(--transition-base);
        }
        
        .stat-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1;
        }
        
        .stat-change {
            font-size: 12px;
            margin-top: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }
        
        .stat-change.positive {
            color: var(--status-success);
        }
        
        .stat-change.negative {
            color: var(--status-error);
        }
        
        /* ===== CARDS ===== */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-lg);
            transition: all var(--transition-base);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-lg);
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .card-actions {
            display: flex;
            gap: var(--space-sm);
        }
        
        /* ===== ROBOT CARDS ===== */
        .robot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }
        
        .robot-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            transition: all var(--transition-base);
            cursor: pointer;
        }
        
        .robot-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }
        
        .robot-card.active {
            border-left: 4px solid var(--status-success);
        }
        
        .robot-card.idle {
            border-left: 4px solid var(--status-warning);
        }
        
        .robot-card.error {
            border-left: 4px solid var(--status-error);
        }
        
        .robot-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-md);
        }
        
        .robot-id {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .robot-status-badge {
            padding: var(--space-xs) var(--space-md);
            border-radius: var(--radius-full);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .robot-status-badge.active {
            background: rgba(115, 192, 0, 0.15);
            color: var(--status-success);
        }
        
        .robot-status-badge.idle {
            background: rgba(255, 185, 70, 0.15);
            color: var(--status-warning);
        }
        
        .robot-status-badge.error {
            background: rgba(255, 84, 89, 0.15);
            color: var(--status-error);
        }
        
        .robot-info {
            margin-bottom: var(--space-md);
        }
        
        .robot-info-item {
            display: flex;
            justify-content: space-between;
            padding: var(--space-sm) 0;
            font-size: 13px;
        }
        
        .robot-info-label {
            color: var(--text-secondary);
        }
        
        .robot-info-value {
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .robot-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
            margin-top: var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid var(--border-color);
        }
        
        .metric-item {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
        }
        
        .metric-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .metric-value {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .robot-activity {
            margin-top: var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid var(--border-color);
        }
        
        .activity-item {
            padding: var(--space-sm) 0;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* ===== BUTTONS ===== */
        .btn {
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            border: none;
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            font-family: var(--font-system);
        }
        
        .btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-primary {
            background: var(--primary-teal);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2AA3B0;
        }
        
        .btn-success {
            background: var(--status-success);
            color: white;
        }
        
        .btn-success:hover {
            background: #66AD00;
        }
        
        .btn-danger {
            background: var(--status-error);
            color: white;
        }
        
        .btn-danger:hover {
            background: #E64A4F;
        }
        
        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }
        
        .btn-secondary:hover {
            background: var(--border-color);
        }
        
        .btn-large {
            padding: var(--space-lg) var(--space-xl);
            font-size: 16px;
            min-width: 200px;
            justify-content: center;
        }
        
        .btn-icon {
            padding: var(--space-md);
            width: 40px;
            height: 40px;
            justify-content: center;
        }
        
        /* ===== FIXED CONTROL BAR (Apple Design - Always Visible) ===== */
        .control-bar {
            position: fixed;
            bottom: 0;
            left: var(--sidebar-width);
            right: 0;
            height: 80px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            padding: var(--space-md) var(--space-xl);
            display: flex;
            align-items: center;
            gap: var(--space-md);
            z-index: 100;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.08);
            transition: all var(--transition-base);
        }
        
        @media (prefers-color-scheme: dark) {
            .control-bar {
                box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.25);
            }
        }
        
        [data-theme="dark"] .control-bar {
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.25);
        }
        
        /* ===== ALERTS ===== */
        .alerts-grid {
            display: grid;
            gap: var(--space-md);
        }
        
        .alert {
            padding: var(--space-lg);
            border-radius: var(--radius-lg);
            border-left: 4px solid;
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
        }
        
        .alert-critical {
            background: rgba(255, 84, 89, 0.1);
            border-left-color: var(--status-error);
        }
        
        .alert-warning {
            background: rgba(255, 185, 70, 0.1);
            border-left-color: var(--status-warning);
        }
        
        .alert-info {
            background: rgba(50, 184, 198, 0.1);
            border-left-color: var(--status-info);
        }
        
        .alert-icon {
            font-size: 20px;
        }
        
        .alert-content {
            flex: 1;
        }
        
        .alert-title {
            font-weight: 600;
            margin-bottom: var(--space-xs);
        }
        
        .alert-message {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        /* ===== ACTIVITY LOG ===== */
        .activity-log {
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            max-height: 400px;
            overflow-y: auto;
            font-family: var(--font-mono);
            font-size: 12px;
        }
        
        .log-entry {
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            gap: var(--space-md);
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .log-timestamp {
            color: var(--text-tertiary);
            font-weight: 600;
        }
        
        .log-message {
            color: var(--text-primary);
        }
        
        .log-entry.success {
            color: var(--status-success);
        }
        
        .log-entry.error {
            color: var(--status-error);
        }
        
        .log-entry.warning {
            color: var(--status-warning);
        }
        
        /* ===== AI VISION DEBUG ===== */
        .vision-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }
        
        .camera-feed {
            background: #1A1A1A;
            border-radius: var(--radius-lg);
            aspect-ratio: 16/9;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .detection-overlay {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }
        
        .detected-box {
            position: absolute;
            border: 2px solid var(--primary-teal);
            background: rgba(50, 184, 198, 0.1);
            border-radius: var(--radius-sm);
        }
        
        .detected-box.selected {
            border-color: var(--status-success);
            border-width: 3px;
        }
        
        .box-label {
            position: absolute;
            top: -24px;
            left: 0;
            background: var(--primary-teal);
            color: white;
            padding: var(--space-xs) var(--space-sm);
            font-size: 11px;
            font-weight: 600;
            border-radius: var(--radius-sm);
        }
        
        .detection-info {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }
        
        .detected-objects-list {
            margin-top: var(--space-md);
        }
        
        .object-item {
            padding: var(--space-md);
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-sm);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .object-item.selected {
            background: rgba(115, 192, 0, 0.15);
            border: 2px solid var(--status-success);
        }
        
        .confidence-bar {
            height: 6px;
            background: var(--bg-tertiary);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-top: var(--space-xs);
        }
        
        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-teal), var(--status-success));
            border-radius: var(--radius-full);
            transition: width var(--transition-base);
        }
        
        /* ===== DIAGNOSTICS ===== */
        .diagnostics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-lg);
        }
        
        .diagnostic-item {
            background: var(--bg-tertiary);
            padding: var(--space-lg);
            border-radius: var(--radius-md);
            text-align: center;
        }
        
        .diagnostic-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
        }
        
        .diagnostic-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }
        
        /* ===== CONTROLS ===== */
        .control-panel {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }
        
        .control-group {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
        }
        
        .control-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--space-md);
        }
        
        .slider-container {
            margin-top: var(--space-md);
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: var(--radius-full);
            background: var(--bg-tertiary);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-teal);
            cursor: pointer;
            box-shadow: var(--shadow-md);
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-teal);
            cursor: pointer;
            border: none;
            box-shadow: var(--shadow-md);
        }
        
        .select-input {
            width: 100%;
            padding: var(--space-md);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 14px;
            font-family: var(--font-system);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .select-input:focus {
            outline: none;
            border-color: var(--border-focus);
            box-shadow: 0 0 0 3px rgba(50, 184, 198, 0.1);
        }
        
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            background: var(--bg-tertiary);
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: background var(--transition-fast);
        }
        
        .toggle-switch.active {
            background: var(--primary-teal);
        }
        
        .toggle-handle {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }
        
        .toggle-switch.active .toggle-handle {
            transform: translateX(24px);
        }
        
        /* ===== 3D SCENE ===== */
        .scene-container {
            background: linear-gradient(135deg, #1A1A1A, #2A2A2A);
            border-radius: var(--radius-lg);
            aspect-ratio: 16/10;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            margin-bottom: var(--space-xl);
        }
        
        /* ===== DECISION PANEL ===== */
        .decision-panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
        }
        
        .decision-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-lg);
        }
        
        .decision-item {
            padding: var(--space-md);
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-md);
        }
        
        .decision-item-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-sm);
        }
        
        .decision-item-value {
            color: var(--text-secondary);
            font-size: 13px;
        }
        
        /* ===== SETTINGS ===== */
        .settings-section {
            margin-bottom: var(--space-xl);
        }
        
        .settings-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-md);
            border-bottom: 2px solid var(--border-color);
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-lg);
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-md);
        }
        
        .setting-info h4 {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }
        
        .setting-info p {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        /* ===== PROGRESS BARS ===== */
        .progress-bar {
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-top: var(--space-sm);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-teal), var(--accent-green));
            border-radius: var(--radius-full);
            transition: width var(--transition-base);
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 1024px) {
            .hero-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .robot-grid {
                grid-template-columns: 1fr;
            }
            
            .vision-container {
                grid-template-columns: 1fr;
            }
            
            .diagnostics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: 0;
                top: 0;
                height: 100vh;
            }
            
            .hero-stats {
                grid-template-columns: 1fr;
            }
            
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .action-bar {
                flex-direction: column;
                bottom: var(--space-md);
                right: var(--space-md);
            }
        }
        
        /* ===== SCROLLBAR STYLING ===== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: var(--radius-full);
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }
        
        /* ===== ANIMATIONS ===== */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-in {
            animation: slideIn var(--transition-base) var(--transition-fast);
        }
        
        /* ===== UTILITIES ===== */
        .flex {
            display: flex;
        }
        
        .flex-col {
            flex-direction: column;
        }
        
        .items-center {
            align-items: center;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .gap-sm {
            gap: var(--space-sm);
        }
        
        .gap-md {
            gap: var(--space-md);
        }
        
        .gap-lg {
            gap: var(--space-lg);
        }
        
        .text-center {
            text-align: center;
        }
        
        .mt-lg {
            margin-top: var(--space-lg);
        }
        
        .mb-lg {
            margin-bottom: var(--space-lg);
        }
    /* ===== DEBUG CONSOLE (Below Control Bar - Apple Style) ===== */
    .debug-console {
        position: fixed;
        bottom: 80px;
        left: var(--sidebar-width);
        right: 0;
        max-height: 300px;
        background: linear-gradient(180deg, rgba(20, 20, 25, 0.95) 0%, rgba(10, 10, 15, 0.98) 100%);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.08);
        z-index: 99;
        transform: translateY(100%);
        transition: transform var(--transition-base);
        display: flex;
        flex-direction: column;
        font-family: var(--font-mono);
        font-size: 12px;
        color: #E0E0E0;
    }
    
    .debug-console.open {
        transform: translateY(0);
    }
    
    @media (prefers-color-scheme: dark) {
        .debug-console {
            border-top-color: rgba(255, 255, 255, 0.1);
        }
    }
    
    .floating-console {
        display: none !important;
    }

.console-header {
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  display: flex;
  justify-content: space-between;
  align-items: center;
  user-select: none;
  cursor: pointer;
  background: transparent;
}

.console-header-title {
  font-weight: 600;
  font-size: 13px;
  letter-spacing: 0.05em;
  color: #94DCD4;
  display: flex;
  align-items: center;
  gap: 6px;
}

.console-header-actions {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 15px;
}

.console-toggle-btn, .console-close-btn, .console-json-btn {
  background: none;
  border: none;
  color: #E0E0E0;
  font-size: 16px;
  cursor: pointer;
  padding: 4px;
  border-radius: var(--radius-sm);
  transition: background 120ms;
}
.console-toggle-btn:focus, .console-close-btn:focus, .console-json-btn:focus {
  outline: none;
  background: rgba(255,255,255,0.08);
}
.console-toggle-btn:hover, .console-close-btn:hover, .console-json-btn:hover {
  background: rgba(255,255,255,0.07);
}

.console-logs {
  flex: 1;
  overflow-y: auto;
  padding: 12px 16px;
  max-height: 200px;
  font-family: var(--font-mono);
  font-size: 11px;
  line-height: 1.6;
  color: #E0E0E0;
  background: none;
}

.log-line {
  padding: 2px 0;
  cursor: pointer;
  transition: all 150ms;
  border-radius: var(--radius-sm);
  padding-left: 8px;
  margin: 2px -8px 2px -8px;
  display: flex;
  align-items: center;
  gap: 5px;
}
.log-line .log-timestamp {
  color: #888;
  margin-right: 8px;
  width: 70px;
  flex-shrink: 0;
  font-size: 10.5px;
}
.log-line:hover {
  background: rgba(255, 255, 255, 0.05);
}

.log-success { color: var(--status-success); }
.log-error { color: var(--status-error); }
.log-warning { color: var(--status-warning); }
.log-info { color: var(--status-info); }

.console-filter-container {
  border-bottom: 1px solid rgba(255,255,255,0.07);
  background: #282930;
  padding: 5px 12px 5px 12px;
  font-size: 13px;
}
.console-filter-input {
  width: 88%;
  border: none;
  background: #23242B;
  color: #E0E0E0;
  border-radius: 6px;
  font-size: 12px;
  padding: 4px 8px;
  outline: none;
  margin-right: 2px;
}
.console-filter-input:focus {
  background: #222229;
}

.console-json-panel {
  border-top: 1px solid rgba(255,255,255,0.11);
  background: #26262d;
  color: #95DD98;
  font-family: var(--font-mono);
  font-size: 13px;
  padding: 8px 16px 8px 16px;
  max-height: 120px;
  overflow-y: auto;
  display: none;
}
.console-json-panel.open {
  display: block;
}

.console-json-toggle {
  padding: 0 12px 8px 0;
  color: #95DD98;
  font-size: 15px;
  cursor: pointer;
  user-select: none;
}

        /* ===== CONTENT BODY PADDING (Make room for Control Bar) ===== */
        .content-body {
            padding-bottom: 100px;
        }
        
        .content-body.console-open {
            padding-bottom: 400px;
        }
        
        /* ===== CONSOLE TOGGLE BUTTON (In Control Bar) ===== */
        .console-toggle-btn-main {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-lg);
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .console-toggle-btn-main:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border-color: var(--primary-teal);
        }
        
        .console-toggle-btn-main.active {
            background: rgba(50, 184, 198, 0.1);
            color: var(--primary-teal);
            border-color: var(--primary-teal);
        }
        
        @media (max-width: 1024px) {
            .control-bar {
                left: 0;
                padding: var(--space-sm) var(--space-md);
                height: 70px;
            }
            
            .debug-console {
                left: 0;
                bottom: 70px;
                max-height: 200px;
            }
            
            .btn-large {
                padding: var(--space-sm) var(--space-md);
                font-size: 14px;
                min-width: auto;
            }
        }
        
        @media (max-width: 768px) {
            .control-bar {
                flex-wrap: wrap;
                height: auto;
                min-height: 70px;
            }
            
            .debug-console {
                display: none;
            }
            
            .console-toggle-btn-main {
                display: none;
            }
            
            .content-body {
                padding-bottom: 90px;
            }
        }
</style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">UR</div>
                    <span>Swarm Control</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-item active" data-section="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-section="operators">
                    <span class="nav-icon">üë§</span>
                    <span>Operators</span>
                </div>
                <div class="nav-item" data-section="developers">
                    <span class="nav-icon">üíª</span>
                    <span>Developers</span>
                </div>
                <div class="nav-item" data-section="demo">
                    <span class="nav-icon">üé¨</span>
                    <span>Demo</span>
                </div>
                <div class="nav-item" data-section="settings">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div>Version 3.0.0</div>
                <div class="connection-status">
                    <span class="status-dot"></span>
                    <span>Connected</span>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- DASHBOARD SECTION -->
            <div class="content-section active" id="dashboard">
                <div class="content-header">
                    <div>
                        <h1 class="content-title">Swarm Dashboard</h1>
                        <p class="content-subtitle">Real-time monitoring &amp; control of UR20 robot fleet</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-secondary">üì• Export</button>
                        <button class="btn btn-primary">üîÑ Refresh</button>
                    </div>
                </div>
                
                <div class="tabs-container">
                    <div class="tab active" data-tab="autonomous">Autonomous</div>
                    <div class="tab" data-tab="manual">Manual Control</div>
                    <div class="tab" data-tab="debug">Debug Info</div>
                </div>
                
                <div class="content-body">
                    <!-- Hero Stats -->
                    <div class="hero-stats">
                        <div class="stat-card">
                            <div class="stat-label">Active Robots</div>
                            <div class="stat-value">3/5</div>
                            <div class="stat-change positive">‚Üë 1 robot online</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Throughput</div>
                            <div class="stat-value">342</div>
                            <div class="stat-change positive">items/h (‚Üë14% vs target)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Latency</div>
                            <div class="stat-value">45ms</div>
                            <div class="stat-change positive">‚Üì 5ms improvement</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Error Rate</div>
                            <div class="stat-value">0.8%</div>
                            <div class="stat-change positive">‚Üì 0.3% from average</div>
                        </div>
                    </div>
                    
                    <!-- System Health Card -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">System Health</h3>
                            <span style="color: var(--status-warning); font-weight: 600;">‚ö†Ô∏è 1 Error Detected</span>
                        </div>
                        <div class="diagnostics-grid">
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">Items Today</div>
                                <div class="diagnostic-value">2,145</div>
                                <div class="stat-change positive">+12% from yesterday</div>
                            </div>
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">System Health</div>
                                <div class="diagnostic-value">78%</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 78%;"></div>
                                </div>
                            </div>
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">Shift Status</div>
                                <div class="diagnostic-value">08:00 AM</div>
                                <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Shift started</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Robot Fleet Status -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Robot Fleet Status</h3>
                            <div class="card-actions">
                                <button class="btn btn-secondary btn-icon">üîç</button>
                                <button class="btn btn-secondary btn-icon">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="robot-grid">
                            <!-- Robot 1 -->
                            <div class="robot-card active">
                                <div class="robot-header">
                                    <div class="robot-id">ü§ñ UR20-001</div>
                                    <span class="robot-status-badge active">ACTIVE</span>
                                </div>
                                <div class="robot-info">
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Location</span>
                                        <span class="robot-info-value">Lobach</span>
                                    </div>
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Mode</span>
                                        <span class="robot-info-value">Endless</span>
                                    </div>
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Current Task</span>
                                        <span class="robot-info-value">Sorting items by type</span>
                                    </div>
                                </div>
                                <div class="robot-metrics">
                                    <div class="metric-item">
                                        <span class="metric-label">FPS</span>
                                        <span class="metric-value">60</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Temp</span>
                                        <span class="metric-value">45¬∞C</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Battery</span>
                                        <span class="metric-value">87%</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Items</span>
                                        <span class="metric-value">867</span>
                                    </div>
                                </div>
                                <div class="robot-activity">
                                    <div class="activity-item">‚úÖ Task completed - 2m ago</div>
                                    <div class="activity-item">üì¶ 42 items processed - 5m ago</div>
                                </div>
                            </div>
                            
                            <!-- Robot 2 -->
                            <div class="robot-card idle">
                                <div class="robot-header">
                                    <div class="robot-id">ü§ñ UR20-002</div>
                                    <span class="robot-status-badge idle">IDLE</span>
                                </div>
                                <div class="robot-info">
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Location</span>
                                        <span class="robot-info-value">SEMAT</span>
                                    </div>
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Mode</span>
                                        <span class="robot-info-value">Standby</span>
                                    </div>
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Current Task</span>
                                        <span class="robot-info-value">Waiting for task assignment</span>
                                    </div>
                                </div>
                                <div class="robot-metrics">
                                    <div class="metric-item">
                                        <span class="metric-label">FPS</span>
                                        <span class="metric-value">60</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Temp</span>
                                        <span class="metric-value">38¬∞C</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Battery</span>
                                        <span class="metric-value">92%</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Throughput</span>
                                        <span class="metric-value">156</span>
                                    </div>
                                </div>
                                <div class="robot-activity">
                                    <div class="activity-item">‚è∏ Paused by operator - 15m ago</div>
                                </div>
                            </div>
                            
                            <!-- Robot 3 -->
                            <div class="robot-card error">
                                <div class="robot-header">
                                    <div class="robot-id">ü§ñ UR20-003</div>
                                    <span class="robot-status-badge error">ERROR</span>
                                </div>
                                <div class="robot-info">
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Location</span>
                                        <span class="robot-info-value">Belgrade</span>
                                    </div>
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Mode</span>
                                        <span class="robot-info-value">Calibration</span>
                                    </div>
                                    <div class="robot-info-item">
                                        <span class="robot-info-label">Current Task</span>
                                        <span class="robot-info-value" style="color: var(--status-error);">‚ö†Ô∏è Sensor calibration issue</span>
                                    </div>
                                </div>
                                <div class="robot-metrics">
                                    <div class="metric-item">
                                        <span class="metric-label">FPS</span>
                                        <span class="metric-value">0</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Temp</span>
                                        <span class="metric-value" style="color: var(--status-error);">52¬∞C</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Battery</span>
                                        <span class="metric-value" style="color: var(--status-warning);">45%</span>
                                    </div>
                                    <div class="metric-item">
                                        <span class="metric-label">Throughput</span>
                                        <span class="metric-value">89</span>
                                    </div>
                                </div>
                                <div class="robot-activity">
                                    <div class="activity-item">‚ùå Calibration failed - 8m ago</div>
                                    <div class="activity-item">‚ö†Ô∏è High temp detected - 12m ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Alerts & Issues -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Alerts &amp; Issues</h3>
                            <button class="btn btn-secondary btn-icon">üîî</button>
                        </div>
                        <div class="alerts-grid">
                            <div class="alert alert-critical">
                                <div class="alert-icon">üî¥</div>
                                <div class="alert-content">
                                    <div class="alert-title">Critical: Robot UR20-003 Calibration Failed</div>
                                    <div class="alert-message">Sensor calibration failed - requires immediate attention. Last occurred: 8m ago</div>
                                    <button class="btn btn-danger" style="margin-top: 12px;">Fix Now</button>
                                </div>
                            </div>
                            <div class="alert alert-warning">
                                <div class="alert-icon">‚ö†Ô∏è</div>
                                <div class="alert-content">
                                    <div class="alert-title">Warning: High Temperature Detected</div>
                                    <div class="alert-message">UR20-003 temperature at 52¬∞C (threshold: 50¬∞C). System cooling initiated.</div>
                                </div>
                            </div>
                            <div class="alert alert-info">
                                <div class="alert-icon">‚ÑπÔ∏è</div>
                                <div class="alert-content">
                                    <div class="alert-title">Info: UR20-002 Awaiting Assignment</div>
                                    <div class="alert-message">Robot is idle and ready for new tasks. Battery: 92%</div>
                                    <button class="btn btn-primary" style="margin-top: 12px;">Assign Task</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Real-Time Activity Log -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Real-Time Activity Log</h3>
                            <button class="btn btn-secondary">Clear Log</button>
                        </div>
                        <div class="activity-log" id="activityLog">
                            <div class="log-entry success">
                                <span class="log-timestamp">14:35:22</span>
                                <span class="log-message">Task completed - 42 items processed</span>
                            </div>
                            <div class="log-entry warning">
                                <span class="log-timestamp">14:32:10</span>
                                <span class="log-message">Temperature warning - Robot 3 at 58¬∞C</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-timestamp">14:28:45</span>
                                <span class="log-message">Sensor drift detected - auto-calibrated</span>
                            </div>
                            <div class="log-entry success">
                                <span class="log-timestamp">14:25:12</span>
                                <span class="log-message">Pallet delivered successfully</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-timestamp">14:22:45</span>
                                <span class="log-message">Robot 1 started new task</span>
                            </div>
                            <div class="log-entry success">
                                <span class="log-timestamp">14:20:33</span>
                                <span class="log-message">Camera calibration completed</span>
                            </div>
                            <div class="log-entry error">
                                <span class="log-timestamp">14:15:22</span>
                                <span class="log-message">Robot 3 calibration failed - requires attention</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- OPERATORS SECTION -->
            <div class="content-section" id="operators">
                <div class="content-header">
                    <div>
                        <h1 class="content-title">Operator Interface</h1>
                        <p class="content-subtitle">Simplified interface for operators without programming skills</p>
                    </div>
                </div>
                
                <div class="content-body">
                    <!-- Current Robot Status -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Current Robot Status</h3>
                        <div class="robot-info">
                            <div class="robot-info-item">
                                <span class="robot-info-label">Robot ID</span>
                                <span class="robot-info-value">UR20-001</span>
                            </div>
                            <div class="robot-info-item">
                                <span class="robot-info-label">Location</span>
                                <span class="robot-info-value">Lobach</span>
                            </div>
                            <div class="robot-info-item">
                                <span class="robot-info-label">Mode</span>
                                <span class="robot-info-value">Endless</span>
                            </div>
                            <div class="robot-info-item">
                                <span class="robot-info-label">Current Task</span>
                                <span class="robot-info-value">Sorting items by type</span>
                            </div>
                            <div class="robot-info-item">
                                <span class="robot-info-label">Status</span>
                                <span class="robot-status-badge active">ACTIVE</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Control Panel -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Control Panel</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                            <button class="btn btn-success btn-large" style="height: 80px; font-size: 18px;">
                                ‚ñ∂Ô∏è START
                            </button>
                            <button class="btn btn-danger btn-large" style="height: 80px; font-size: 18px;">
                                ‚èπÔ∏è STOP
                            </button>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Quick Actions</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                            <button class="btn btn-secondary btn-large">üîÑ Restart Task</button>
                            <button class="btn btn-secondary btn-large">üßπ Clear Error</button>
                            <button class="btn btn-secondary btn-large">‚è∏Ô∏è Pause Operation</button>
                            <button class="btn btn-secondary btn-large">üìä View Status</button>
                        </div>
                    </div>
                    
                    <!-- Emergency Stop -->
                    <div class="card" style="border: 3px solid var(--status-error); background: rgba(255, 84, 89, 0.05);">
                        <h3 class="card-title" style="color: var(--status-error); margin-bottom: 16px;">‚ö†Ô∏è Emergency Controls</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 16px;">Use this button only in emergency situations. All robots will stop immediately.</p>
                        <button class="btn btn-danger btn-large" style="width: 100%; height: 80px; font-size: 20px; font-weight: 700;">
                            üõë EMERGENCY STOP
                        </button>
                    </div>
                    
                    <!-- Recent Activity -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Recent Activity</h3>
                        <div class="robot-activity">
                            <div class="activity-item">‚úÖ Task completed - 2m ago</div>
                            <div class="activity-item">üì¶ 42 items processed - 5m ago</div>
                            <div class="activity-item">üîÑ System auto-calibrated - 12m ago</div>
                            <div class="activity-item">‚úÖ Shift started successfully - 1h ago</div>
                            <div class="activity-item">üìä Daily report generated - 2h ago</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- DEVELOPERS SECTION -->
            <div class="content-section" id="developers">
                <div class="content-header">
                    <div>
                        <h1 class="content-title">Developer Console</h1>
                        <p class="content-subtitle">Full diagnostic interface for developers</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-secondary">üìä Export Logs</button>
                        <button class="btn btn-primary">üîÑ Restart Services</button>
                    </div>
                </div>
                
                <div class="content-body">
                    <!-- AI Vision Debug -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">AI Vision Debug</h3>
                        <div class="vision-container">
                            <div class="camera-feed">
                                <div style="text-align: center;">
                                    <div style="font-size: 48px; margin-bottom: 16px;">üìπ</div>
                                    <div style="font-size: 18px; font-weight: 600;">Live Camera Feed</div>
                                    <div style="font-size: 14px; color: rgba(255,255,255,0.6); margin-top: 8px;">AI Gen-3 Object Detection Active</div>
                                    <div style="margin-top: 24px; display: flex; gap: 8px; justify-content: center;">
                                        <div style="padding: 8px 16px; background: rgba(50, 184, 198, 0.2); border-radius: 6px; font-size: 12px; font-weight: 600;">60 FPS</div>
                                        <div style="padding: 8px 16px; background: rgba(115, 192, 0, 0.2); border-radius: 6px; font-size: 12px; font-weight: 600;">94.2% Avg Confidence</div>
                                        <div style="padding: 8px 16px; background: rgba(255, 185, 70, 0.2); border-radius: 6px; font-size: 12px; font-weight: 600;">3 Objects Detected</div>
                                    </div>
                                </div>
                            </div>
                            <div class="detection-info">
                                <h4 style="font-weight: 600; margin-bottom: 16px;">Detected Objects</h4>
                                <div class="detected-objects-list">
                                    <div class="object-item">
                                        <div>
                                            <div style="font-weight: 600;">Box #1</div>
                                            <div style="font-size: 12px; color: var(--text-secondary);">Confidence: 89.3%</div>
                                            <div class="confidence-bar">
                                                <div class="confidence-fill" style="width: 89.3%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="object-item selected">
                                        <div style="flex: 1;">
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <div style="font-weight: 600;">Box #2</div>
                                                <span style="background: var(--status-success); color: white; padding: 2px 8px; border-radius: 4px; font-size: 10px; font-weight: 700;">SELECTED</span>
                                            </div>
                                            <div style="font-size: 12px; color: var(--text-secondary);">Confidence: 96.8%</div>
                                            <div class="confidence-bar">
                                                <div class="confidence-fill" style="width: 96.8%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="object-item">
                                        <div>
                                            <div style="font-weight: 600;">Box #3</div>
                                            <div style="font-size: 12px; color: var(--text-secondary);">Confidence: 92.1%</div>
                                            <div class="confidence-bar">
                                                <div class="confidence-fill" style="width: 92.1%;"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="margin-top: 24px; padding: 16px; background: rgba(115, 192, 0, 0.1); border-radius: 8px; border-left: 4px solid var(--status-success);">
                                    <div style="font-weight: 600; margin-bottom: 8px;">Selection Reasoning:</div>
                                    <div style="font-size: 13px; color: var(--text-secondary); line-height: 1.6;">
                                        Box #2 selected with 96.8% confidence. Optimal position, clear visibility, and ideal for gripper approach.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Robot Parameters -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Robot Parameters</h3>
                        <div class="control-panel">
                            <div class="control-group">
                                <label class="control-label">Speed Control</label>
                                <div style="display: flex; align-items: center; gap: 16px;">
                                    <input type="range" class="slider" min="50" max="100" value="75" id="speedSlider">
                                    <span id="speedValue" style="font-weight: 600; min-width: 50px;">75%</span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Scan Mode</label>
                                <div style="display: flex; align-items: center; gap: 16px;">
                                    <div class="toggle-switch active" id="scanToggle">
                                        <div class="toggle-handle"></div>
                                    </div>
                                    <span style="font-weight: 600;">Enabled</span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Location</label>
                                <select class="select-input">
                                    <option>Lobach</option>
                                    <option>SEMAT</option>
                                    <option>Belgrade</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label class="control-label">Operation Mode</label>
                                <select class="select-input">
                                    <option>Endless</option>
                                    <option>Single Task</option>
                                    <option>Standby</option>
                                    <option>Calibration</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Diagnostics Panel -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">System Diagnostics</h3>
                        <div class="diagnostics-grid">
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">FPS</div>
                                <div class="diagnostic-value">60</div>
                            </div>
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">Inference Time</div>
                                <div class="diagnostic-value">12ms</div>
                            </div>
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">Memory Usage</div>
                                <div class="diagnostic-value">2.4GB</div>
                                <div style="font-size: 11px; color: var(--text-secondary); margin-top: 4px;">of 8GB</div>
                            </div>
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">Last Error</div>
                                <div class="diagnostic-value" style="font-size: 16px; color: var(--status-success);">None</div>
                            </div>
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">Uptime</div>
                                <div class="diagnostic-value" style="font-size: 16px;">48h 23m</div>
                            </div>
                            <div class="diagnostic-item">
                                <div class="diagnostic-label">Temperature</div>
                                <div class="diagnostic-value">42¬∞C</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Debug Console -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Debug Console</h3>
                        <div class="activity-log" style="max-height: 300px;">
                            <div class="log-entry">
                                <span class="log-timestamp">14:35:28</span>
                                <span class="log-message">[INFO] Vision module initialized successfully</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-timestamp">14:35:26</span>
                                <span class="log-message">[INFO] Camera calibration: focal_length=850px, distortion=0.02</span>
                            </div>
                            <div class="log-entry success">
                                <span class="log-timestamp">14:35:22</span>
                                <span class="log-message">[SUCCESS] Object detection: 3 objects found, avg_conf=94.2%</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-timestamp">14:35:20</span>
                                <span class="log-message">[INFO] AI Gen-3 model loaded: inference_time=12ms</span>
                            </div>
                            <div class="log-entry warning">
                                <span class="log-timestamp">14:35:18</span>
                                <span class="log-message">[WARN] Network latency spike detected: +50ms</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-timestamp">14:35:15</span>
                                <span class="log-message">[INFO] Motion planning: path computed in 45ms</span>
                            </div>
                            <div class="log-entry success">
                                <span class="log-timestamp">14:35:12</span>
                                <span class="log-message">[SUCCESS] Pick operation completed: cycle_time=8.5s</span>
                            </div>
                            <div class="log-entry">
                                <span class="log-timestamp">14:35:08</span>
                                <span class="log-message">[INFO] Gripper pressure: 85%, temperature: 38¬∞C</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Post-Cycle Analysis -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Post-Cycle Analysis</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;">
                            <div>
                                <div class="diagnostic-item">
                                    <div class="diagnostic-label">Cycle Time</div>
                                    <div class="diagnostic-value" style="color: var(--status-success);">8.5s</div>
                                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Target: 9.0s (‚Üì 0.5s improvement)</div>
                                </div>
                            </div>
                            <div>
                                <div class="diagnostic-item">
                                    <div class="diagnostic-label">Success Rate</div>
                                    <div class="diagnostic-value">100%</div>
                                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Last 50 operations</div>
                                </div>
                            </div>
                            <div>
                                <div class="diagnostic-item">
                                    <div class="diagnostic-label">Avg Confidence</div>
                                    <div class="diagnostic-value">94.2%</div>
                                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Object detection</div>
                                </div>
                            </div>
                            <div>
                                <div class="diagnostic-item">
                                    <div class="diagnostic-label">Anomalies</div>
                                    <div class="diagnostic-value" style="color: var(--status-success);">0</div>
                                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">No issues detected</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 3D Scene Visualization -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">3D Workspace Visualization</h3>
                        <div class="scene-container">
                            <div style="text-align: center;">
                                <div style="font-size: 64px; margin-bottom: 16px;">üéÆ</div>
                                <div style="font-size: 20px; font-weight: 600;">WebGL 3D Scene</div>
                                <div style="font-size: 14px; color: rgba(255,255,255,0.6); margin-top: 8px;">Live robot workspace simulation</div>
                                <div style="margin-top: 24px;">
                                    <button class="btn btn-primary">‚ñ∂Ô∏è Start Animation</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- DEMO SECTION -->
            <div class="content-section" id="demo">
                <div class="content-header">
                    <div>
                        <h1 class="content-title">Customer Demo</h1>
                        <p class="content-subtitle">For showcasing to customers</p>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-success">‚ñ∂Ô∏è Start Demo</button>
                        <button class="btn btn-danger">‚èπÔ∏è Stop Demo</button>
                    </div>
                </div>
                
                <div class="content-body">
                    <!-- Live AI Decision Making -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Live AI Decision Making</h3>
                        <div class="camera-feed" style="margin-bottom: 24px;">
                            <div style="text-align: center;">
                                <div style="font-size: 64px; margin-bottom: 16px;">ü§ñ</div>
                                <div style="font-size: 24px; font-weight: 700;">AI Gen-3 Vision System</div>
                                <div style="font-size: 16px; color: rgba(255,255,255,0.7); margin-top: 12px;">Real-time object detection &amp; decision making</div>
                                <div style="margin-top: 32px; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                                    <div style="padding: 12px 24px; background: rgba(50, 184, 198, 0.3); border-radius: 8px; font-size: 14px; font-weight: 600;">
                                        üìπ 60 FPS
                                    </div>
                                    <div style="padding: 12px 24px; background: rgba(115, 192, 0, 0.3); border-radius: 8px; font-size: 14px; font-weight: 600;">
                                        ‚úÖ 96.8% Confidence
                                    </div>
                                    <div style="padding: 12px 24px; background: rgba(255, 185, 70, 0.3); border-radius: 8px; font-size: 14px; font-weight: 600;">
                                        üéØ 3 Objects
                                    </div>
                                    <div style="padding: 12px 24px; background: rgba(255, 84, 89, 0.3); border-radius: 8px; font-size: 14px; font-weight: 600;">
                                        ‚ö° 12ms Inference
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="decision-panel">
                            <h3 class="decision-title">üéØ Why This Decision?</h3>
                            <div style="padding: 24px; background: rgba(115, 192, 0, 0.1); border-radius: 12px; border: 2px solid var(--status-success); margin-bottom: 24px;">
                                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                                    <div style="font-size: 32px;">üì¶</div>
                                    <div>
                                        <div style="font-size: 20px; font-weight: 700;">Box #2 Selected</div>
                                        <div style="font-size: 14px; color: var(--text-secondary);">Highest confidence with optimal parameters</div>
                                    </div>
                                </div>
                            </div>
                            
                            <h4 style="font-weight: 600; margin-bottom: 16px; font-size: 16px;">Decision Factors:</h4>
                            <div class="decision-item">
                                <div class="decision-item-title">üìè Size Analysis</div>
                                <div class="decision-item-value">Dimensions within optimal range (250x180x120mm) - Perfect for UR20 gripper</div>
                            </div>
                            <div class="decision-item">
                                <div class="decision-item-title">‚öñÔ∏è Weight Prediction</div>
                                <div class="decision-item-value">Estimated 2.4kg - Well within safe payload limits (20kg max)</div>
                            </div>
                            <div class="decision-item">
                                <div class="decision-item-title">üîÑ Orientation</div>
                                <div class="decision-item-value">Flat top surface detected - Stable grip guaranteed at 98.2%</div>
                            </div>
                            <div class="decision-item">
                                <div class="decision-item-title">üìç Position Reachability</div>
                                <div class="decision-item-value">Location (412, 156) - Direct path available, no obstacles</div>
                            </div>
                            <div class="decision-item">
                                <div class="decision-item-title">‚è±Ô∏è Travel Time</div>
                                <div class="decision-item-value">Optimized path: 2.3s estimated - Fastest among all options</div>
                            </div>
                            
                            <h4 style="font-weight: 600; margin: 24px 0 16px; font-size: 16px;">Alternative Options Considered:</h4>
                            <div style="display: grid; gap: 12px;">
                                <div style="padding: 16px; background: var(--bg-tertiary); border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;">Box #1</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">Rejected: Lower confidence (89.3%)</div>
                                    </div>
                                    <div style="color: var(--text-tertiary); font-size: 12px;">Rank #2</div>
                                </div>
                                <div style="padding: 16px; background: var(--bg-tertiary); border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;">Box #3</div>
                                        <div style="font-size: 12px; color: var(--text-secondary);">Rejected: Partially occluded (92.1%)</div>
                                    </div>
                                    <div style="color: var(--text-tertiary); font-size: 12px;">Rank #3</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Demo Controls -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Demo Controls</h3>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px;">
                            <button class="btn btn-success btn-large">‚ñ∂Ô∏è Start</button>
                            <button class="btn btn-danger btn-large">‚èπÔ∏è Stop</button>
                            <button class="btn btn-secondary btn-large">‚è≠Ô∏è Next Frame</button>
                            <button class="btn btn-secondary btn-large">üîÑ Reset</button>
                        </div>
                        <div style="margin-top: 24px;">
                            <label class="control-label">Playback Speed</label>
                            <div style="display: flex; align-items: center; gap: 16px;">
                                <input type="range" class="slider" min="25" max="200" value="100" id="playbackSlider">
                                <span id="playbackValue" style="font-weight: 600; min-width: 60px;">100%</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Performance Overview -->
                    <div class="card">
                        <h3 class="card-title" style="margin-bottom: 24px;">Performance Overview</h3>
                        <div class="hero-stats">
                            <div class="stat-card">
                                <div class="stat-label">Success Rate</div>
                                <div class="stat-value">99.2%</div>
                                <div class="stat-change positive">‚Üë 1.2% this week</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Avg Cycle Time</div>
                                <div class="stat-value">8.5s</div>
                                <div class="stat-change positive">‚Üì 0.5s improvement</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Cost per Item</div>
                                <div class="stat-value">$0.12</div>
                                <div class="stat-change positive">15% reduction</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Total Processed</div>
                                <div class="stat-value">58.9K</div>
                                <div class="stat-change positive">This month</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- SETTINGS SECTION -->
            <div class="content-section" id="settings">
                <div class="content-header">
                    <div>
                        <h1 class="content-title">Settings</h1>
                        <p class="content-subtitle">Configure system preferences &amp; view information</p>
                    </div>
                </div>
                
                <div class="content-body">
                    <!-- System Settings -->
                    <div class="settings-section">
                        <h2 class="settings-title">System Settings</h2>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>UI Theme</h4>
                                <p>Toggle between light and dark mode</p>
                            </div>
                            <div class="toggle-switch" id="themeToggle">
                                <div class="toggle-handle"></div>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Update Frequency</h4>
                                <p>How often to refresh real-time data</p>
                            </div>
                            <select class="select-input" style="width: 200px;">
                                <option>1 second</option>
                                <option>500ms</option>
                                <option>100ms</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Notifications</h4>
                                <p>Control alert notifications</p>
                            </div>
                            <select class="select-input" style="width: 200px;">
                                <option>All Notifications</option>
                                <option>Errors Only</option>
                                <option>None</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Language</h4>
                                <p>Select interface language</p>
                            </div>
                            <select class="select-input" style="width: 200px;">
                                <option>English</option>
                                <option>–†—É—Å—Å–∫–∏–π</option>
                                <option>‰∏≠Êñá</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- About -->
                    <div class="settings-section">
                        <h2 class="settings-title">About</h2>
                        <div class="card">
                            <div style="text-align: center; padding: 24px;">
                                <div class="logo-icon" style="margin: 0 auto 24px; width: 80px; height: 80px; font-size: 40px;">UR</div>
                                <h2 style="font-size: 24px; font-weight: 700; margin-bottom: 8px;">UR20 Swarm Control Dashboard</h2>
                                <p style="color: var(--text-secondary); margin-bottom: 24px;">Production-ready swarm robotics interface</p>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; text-align: left; max-width: 500px; margin: 0 auto;">
                                    <div style="padding: 16px; background: var(--bg-tertiary); border-radius: 8px;">
                                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Version</div>
                                        <div style="font-weight: 600;">3.0.0</div>
                                    </div>
                                    <div style="padding: 16px; background: var(--bg-tertiary); border-radius: 8px;">
                                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Release Date</div>
                                        <div style="font-weight: 600;">2025-11-27</div>
                                    </div>
                                    <div style="padding: 16px; background: var(--bg-tertiary); border-radius: 8px;">
                                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Status</div>
                                        <div style="font-weight: 600; color: var(--status-success);">Production PoC</div>
                                    </div>
                                    <div style="padding: 16px; background: var(--bg-tertiary); border-radius: 8px;">
                                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Environment</div>
                                        <div style="font-weight: 600;">Production</div>
                                    </div>
                                </div>
                                <div style="margin-top: 32px; padding: 24px; background: var(--bg-tertiary); border-radius: 12px; text-align: left;">
                                    <h4 style="font-weight: 600; margin-bottom: 12px;">Key Features:</h4>
                                    <ul style="list-style: none; padding: 0; margin: 0; color: var(--text-secondary); line-height: 2;">
                                        <li>‚úÖ Multi-robot fleet management</li>
                                        <li>‚úÖ AI Gen-3 vision system integration</li>
                                        <li>‚úÖ Real-time performance monitoring</li>
                                        <li>‚úÖ Role-based interfaces (Operator/Developer/Demo)</li>
                                        <li>‚úÖ Advanced diagnostics &amp; debugging</li>
                                        <li>‚úÖ WMS &amp; team administration</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Security -->
                    <div class="settings-section">
                        <h2 class="settings-title">Security</h2>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Connection Status</h4>
                                <p>Current connection security status</p>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div class="status-dot"></div>
                                <span style="font-weight: 600; color: var(--status-success);">Secure Connection</span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Last Login</h4>
                                <p>Your most recent login time</p>
                            </div>
                            <span style="font-weight: 600;">Today at 08:00 AM</span>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Session Timeout</h4>
                                <p>Automatic logout after inactivity</p>
                            </div>
                            <span style="font-weight: 600;">30 minutes</span>
                        </div>
                    </div>
                    
                    <!-- Audit Log -->
                    <div class="settings-section">
                        <h2 class="settings-title">Audit Log</h2>
                        <div class="card">
                            <div class="activity-log" style="max-height: 400px;">
                                <div class="log-entry">
                                    <span class="log-timestamp">14:35:22</span>
                                    <span class="log-message">User logged in from 192.168.1.100</span>
                                </div>
                                <div class="log-entry">
                                    <span class="log-timestamp">14:30:15</span>
                                    <span class="log-message">Settings updated: Theme changed to dark mode</span>
                                </div>
                                <div class="log-entry success">
                                    <span class="log-timestamp">14:25:08</span>
                                    <span class="log-message">Robot UR20-001 task started by operator</span>
                                </div>
                                <div class="log-entry">
                                    <span class="log-timestamp">14:20:45</span>
                                    <span class="log-message">System configuration exported</span>
                                </div>
                                <div class="log-entry warning">
                                    <span class="log-timestamp">14:15:30</span>
                                    <span class="log-message">Failed login attempt detected</span>
                                </div>
                                <div class="log-entry">
                                    <span class="log-timestamp">14:10:12</span>
                                    <span class="log-message">Dashboard accessed from mobile device</span>
                                </div>
                                <div class="log-entry success">
                                    <span class="log-timestamp">14:05:00</span>
                                    <span class="log-message">System backup completed successfully</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Debug Console (Below Control Bar - Apple Style) -->
        <div id="debugConsole" class="debug-console" role="region" aria-label="Debug Console">
            <!-- Console content will be injected here -->
        </div>
        
        <!-- Fixed Control Bar (Always Visible - Apple Design) -->
        <div class="control-bar">
            <button class="btn btn-success btn-large" title="Start All Robots" style="min-width: 160px;">‚ñ∂Ô∏è Start All</button>
            <button class="btn btn-danger btn-large" title="Stop All Robots" style="min-width: 160px;">‚èπÔ∏è Stop All</button>
            <button class="btn btn-danger btn-large" title="Emergency Stop" style="font-weight: 700; min-width: 160px;">üõë E-Stop</button>
            <button class="btn btn-secondary btn-large" title="Restart System" style="min-width: 160px;">üîÑ Restart</button>
            <button class="console-toggle-btn-main" id="consoleToggleMain" title="Toggle Debug Console">
                <span>‚ñº</span>
                <span>Debug Console</span>
            </button>
        </div>
    </div>
    
    <script>
        // ===== STATE MANAGEMENT =====
        const appState = {
            currentSection: 'dashboard',
            currentTab: 'autonomous',
            theme: 'light',
            robots: [
                {
                    id: 'UR20-001',
                    location: 'Lobach',
                    status: 'ACTIVE',
                    mode: 'Endless',
                    task: 'Sorting items by type',
                    throughput: 342,
                    fps: 60,
                    temperature: 45,
                    battery: 87,
                    items_processed: 867
                },
                {
                    id: 'UR20-002',
                    location: 'SEMAT',
                    status: 'IDLE',
                    mode: 'Standby',
                    task: 'Waiting for task assignment',
                    throughput: 156,
                    fps: 60,
                    temperature: 38,
                    battery: 92
                },
                {
                    id: 'UR20-003',
                    location: 'Belgrade',
                    status: 'ERROR',
                    mode: 'Calibration',
                    task: '‚ö†Ô∏è Sensor calibration issue',
                    throughput: 89,
                    fps: 0,
                    temperature: 52,
                    battery: 45
                }
            ]
        };
        
        // ===== NAVIGATION =====
        function initNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.content-section');
            
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    const sectionId = item.dataset.section;
                    
                    // Update nav active state
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                    
                    // Update section visibility
                    sections.forEach(section => {
                        if (section.id === sectionId) {
                            section.classList.add('active');
                        } else {
                            section.classList.remove('active');
                        }
                    });
                    
                    appState.currentSection = sectionId;
                });
            });
        }
        
        // ===== TABS =====
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabGroup = tab.parentElement;
                    const allTabs = tabGroup.querySelectorAll('.tab');
                    
                    allTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    appState.currentTab = tab.dataset.tab;
                });
            });
        }
        
        // ===== CONTROLS =====
        function initControls() {
            // Speed slider
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');
            if (speedSlider && speedValue) {
                speedSlider.addEventListener('input', (e) => {
                    speedValue.textContent = e.target.value + '%';
                });
            }
            
            // Playback slider
            const playbackSlider = document.getElementById('playbackSlider');
            const playbackValue = document.getElementById('playbackValue');
            if (playbackSlider && playbackValue) {
                playbackSlider.addEventListener('input', (e) => {
                    playbackValue.textContent = e.target.value + '%';
                });
            }
            
            // Toggle switches
            const scanToggle = document.getElementById('scanToggle');
            if (scanToggle) {
                scanToggle.addEventListener('click', () => {
                    scanToggle.classList.toggle('active');
                });
            }
            
            // Theme toggle
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', () => {
                    themeToggle.classList.toggle('active');
                    const isDark = themeToggle.classList.contains('active');
                    document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
                    appState.theme = isDark ? 'dark' : 'light';
                });
            }
        }
        
        // ===== REAL-TIME UPDATES SIMULATION =====
        function simulateRealTimeUpdates() {
            setInterval(() => {
                // Simulate activity log updates
                const activityLog = document.getElementById('activityLog');
                if (activityLog && appState.currentSection === 'dashboard') {
                    const now = new Date();
                    const timestamp = now.toTimeString().split(' ')[0];
                    
                    const messages = [
                        'Task in progress - processing item batch',
                        'Robot movement optimized',
                        'Vision system calibrated',
                        'Item successfully sorted',
                        'Performance metrics updated'
                    ];
                    
                    const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                    
                    const newEntry = document.createElement('div');
                    newEntry.className = 'log-entry';
                    newEntry.innerHTML = `
                        <span class="log-timestamp">${timestamp}</span>
                        <span class="log-message">${randomMessage}</span>
                    `;
                    
                    activityLog.insertBefore(newEntry, activityLog.firstChild);
                    
                    // Keep only last 10 entries
                    while (activityLog.children.length > 10) {
                        activityLog.removeChild(activityLog.lastChild);
                    }
                }
            }, 5000); // Update every 5 seconds
        }
        
        // ===== BUTTON INTERACTIONS =====
        function initButtons() {
            const buttons = document.querySelectorAll('.btn');
            
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    // Visual feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 100);
                    
                    // Log action (could be expanded)
                    const buttonText = this.textContent.trim();
                    console.log(`Button clicked: ${buttonText}`);
                });
            });
        }
        
        // ===== KEYBOARD SHORTCUTS =====
        function initKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                // Alt+S = Start
                if (e.altKey && e.key === 's') {
                    e.preventDefault();
                    console.log('Start All shortcut triggered');
                }
                
                // Alt+X = Stop
                if (e.altKey && e.key === 'x') {
                    e.preventDefault();
                    console.log('Stop All shortcut triggered');
                }
                
                // Alt+E = Emergency Stop
                if (e.altKey && e.key === 'e') {
                    e.preventDefault();
                    console.log('Emergency Stop shortcut triggered');
                }
                
                // Alt+1-5 = Navigate to sections
                if (e.altKey && e.key >= '1' && e.key <= '5') {
                    e.preventDefault();
                    const sections = ['dashboard', 'operators', 'developers', 'demo', 'settings'];
                    const navItem = document.querySelector(`[data-section="${sections[parseInt(e.key) - 1]}"]`);
                    if (navItem) navItem.click();
                }
            });
        }
        
        // ===== RESPONSIVE SIDEBAR =====
        function initResponsiveSidebar() {
            const sidebar = document.getElementById('sidebar');
            
            // Toggle sidebar on mobile
            if (window.innerWidth <= 768) {
                sidebar.classList.add('collapsed');
            }
            
            window.addEventListener('resize', () => {
                if (window.innerWidth <= 768) {
                    sidebar.classList.add('collapsed');
                } else {
                    sidebar.classList.remove('collapsed');
                }
            });
        }
        
        // ===== INITIALIZE APP =====
        function initApp() {
            console.log('üöÄ UR20 Swarm Control Dashboard v3.0.0 - Initializing...');
            
            initNavigation();
            initTabs();
            initControls();
            initButtons();
            initKeyboardShortcuts();
            initResponsiveSidebar();
            simulateRealTimeUpdates();
            
            console.log('‚úÖ Application initialized successfully');
            console.log('üí° Keyboard Shortcuts:');
            console.log('   Alt+S: Start All | Alt+X: Stop All | Alt+E: E-Stop');
            console.log('   Alt+1-5: Navigate sections');
        }
        
        // Start the application when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }
    </script>
<script>
// ----------- Floating Console Section Log Buffers & Initial Data ----------- //
const floatingConsoleData = {
  dashboard: {
    logs: [
      { ts: "14:35:22.451", msg: "‚úì Model inference: 94.2% confidence", type: "success" },
      { ts: "14:35:22.438", msg: "‚Ñπ Segmentation: 3 objects detected", type: "info" },
      { ts: "14:35:22.425", msg: "‚Ñπ Camera frame @ 60 FPS", type: "info" },
      { ts: "14:35:22.410", msg: "‚Ñπ Box #2: pos=[412,156], conf=0.968 [SELECTED]", type: "info" },
      { ts: "14:35:22.408", msg: "‚Ñπ Box #1: pos=[245,128], conf=0.893", type: "info" },
      { ts: "14:35:22.406", msg: "‚Ñπ Box #3: pos=[178,203], conf=0.921", type: "info" },
      { ts: "14:35:22.400", msg: "‚Ñπ Selection: Box #2 (best grip point)", type: "info" },
      { ts: "14:35:22.395", msg: "‚úì Gripper command sent", type: "success" }
    ],
    jsonPanel: {
      mode: "AUTONOMOUS", targetFPS: 60, inferenceThreshold: 0.85, robotCount: 3, active: 2
    },
    title: "Dashboard Console"
  },
  operators: {
    logs: [
      { ts: "14:35:22", msg: "‚úì Task completed - 42 items processed", type: "success" },
      { ts: "14:32:10", msg: "‚ö† Temperature warning - Robot 3: 58¬∞C", type: "warning" },
      { ts: "14:28:45", msg: "‚Ñπ Sensor drift detected - auto-calibrated", type: "info" },
      { ts: "14:25:12", msg: "‚úì Pallet delivered successfully", type: "success" },
      { ts: "14:22:45", msg: "‚Ñπ Robot 1 started new task", type: "info" },
      { ts: "14:20:33", msg: "‚úì Camera calibration completed", type: "success" },
      { ts: "14:15:22", msg: "‚ùå Robot 3 calibration failed", type: "error" }
    ],
    jsonPanel: {
      robotStatus: "ACTIVE", location: "Lobach", mode: "Endless", itemsProcessed: 867, successRate: "99.2%"
    },
    title: "Operations Log"
  },
  developers: {
    logs: [
      { ts: "14:35:22", msg: "‚úì System initialized", type: "success" },
      { ts: "14:35:21", msg: "‚Ñπ Camera feed connected", type: "info" },
      { ts: "14:35:20", msg: "‚Ñπ AI model loaded: YOLOv8-nano", type: "info" },
      { ts: "14:34:45", msg: "‚ö† High CPU usage: 78%", type: "warning" },
      { ts: "14:34:12", msg: "‚úì Object detected: Box #2 (96.8%)", type: "success" },
      { ts: "14:34:01", msg: "‚Ñπ Inference: 12ms", type: "info" },
      { ts: "14:33:55", msg: "‚Ñπ Memory: 2.4GB / 8GB", type: "info" }
    ],
    jsonPanel: {
      fps: 60, inference_time: 12, memory: "2.4GB/8GB", temperature: 42, cpu: 78, uptime: "48h23m", errors: 0
    },
    title: "AI Diagnostics"
  },
  demo: {
    logs: [
      { ts: "14:35:22", msg: "üé¨ Demo started", type: "info" },
      { ts: "14:35:21", msg: "‚úì AI Vision Stream Active", type: "success" },
      { ts: "14:35:20", msg: "üìä Objects detected: 3", type: "info" },
      { ts: "14:35:19", msg: "‚úì Box #2 selected (96.8% confidence)", type: "success" },
      { ts: "14:35:18", msg: "üìç Position: [412, 156]", type: "info" },
      { ts: "14:35:17", msg: "‚öñÔ∏è Weight predicted: 450g", type: "info" },
      { ts: "14:35:16", msg: "‚úì Gripper optimal", type: "success" },
      { ts: "14:35:15", msg: "üöÄ Ready to execute", type: "info" }
    ],
    jsonPanel: {
      mode: "CUSTOMER_SHOWCASE", objects: 3, confidence: 0.968, selected: "Box #2", ready: true
    },
    title: "Showcase Logs"
  },
  settings: {
    logs: [
      { ts: "14:35:22", msg: "‚Ñπ Theme changed: LIGHT‚ÜíDARK", type: "info" },
      { ts: "14:32:10", msg: "‚Ñπ Update frequency: 1s", type: "info" },
      { ts: "14:30:15", msg: "‚ö† Unusual access: 203.0.113.42", type: "warning" },
      { ts: "14:25:03", msg: "‚Ñπ Environment: STAGING‚ÜíPROD", type: "info" },
      { ts: "14:20:45", msg: "‚Ñπ User logged in: ivan@robotics", type: "info" }
    ],
    jsonPanel: {
      theme: "dark", updateFrequency: 1000, notifications: "all", language: "en", environment: "production"
    },
    title: "Configuration & Audit"
  }
};

function syntaxHighlight(json) {
  if (typeof json !== "string") json = JSON.stringify(json, null, 2);
  json = json.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
  return json.replace(/("[^"]+")(:)?|true|false|null|\d+|\d+\.\d+/g, function (match) {
    if (/^"/.test(match)) {
      if (/(:)$/.test(match)) return '<span style="color:#fff2;">' + match + '</span>';
      return '<span style="color:#a6ffab;">' + match + '</span>';
    }
    if (match === "true" || match === "false") {
      return '<span style="color:#ffa500;">' + match + '</span>';
    }
    if (match === "null") {
      return '<span style="color:#aad;">' + match + '</span>';
    }
    if (match.match(/^\d/)) {
      return '<span style="color:#8ddaff;">' + match + '</span>';
    }
    return match;
  });
}

let floatingConsoleState = {
  minimized: false,
  filterOpen: false,
  filterText: '',
  jsonPanel: false,
  currentSection: 'dashboard',
  sessionMinimized: false
};

class ConsoleManager {
  constructor(sectionName) {
    this.section = sectionName;
    this.logs = [...(floatingConsoleData[sectionName].logs || [])];
    this.maxLogs = 30;
    this.filterText = '';
    this.jsonPanelOpen = false;
    this.render = this.render.bind(this);
  }
  log(message, type = 'info') {
    const now = new Date();
    let hours = now.getHours().toString().padStart(2, "0");
    let mins = now.getMinutes().toString().padStart(2, "0");
    let secs = now.getSeconds().toString().padStart(2, "0");
    let ms = now.getMilliseconds().toString().padStart(3, "0");
    const timestamp = `${hours}:${mins}:${secs}.${ms}`;
    this.logs.unshift({ ts: timestamp, msg: message, type });
    if (this.logs.length > this.maxLogs) this.logs.pop();
    this.render();
  }
  clear() { this.logs = []; this.render(); }
  filter(text) { this.filterText = text; this.render(); }
  render() {
    renderDebugConsole(this.section, this.logs, this.filterText, this.jsonPanelOpen);
  }
}

let consoleManagers = {
  dashboard: new ConsoleManager('dashboard'),
  operators: new ConsoleManager('operators'),
  developers: new ConsoleManager('developers'),
  demo: new ConsoleManager('demo'),
  settings: new ConsoleManager('settings')
};

function getActiveConsoleManager() {
  return consoleManagers[floatingConsoleState.currentSection];
}

// ----------- Render Debug Console (Apple Style) ----------- //
function renderDebugConsole(section, logs, filterText, jsonPanelOpen = false) {
  const data = floatingConsoleData[section];
  const $console = document.getElementById('debugConsole');
  if (!$console) return;

  // Hide on mobile
  if (window.innerWidth < 768) {
    $console.classList.remove('open');
    return;
  }
  
  // Toggle open/closed state
  if (floatingConsoleState.minimized) {
    $console.classList.remove('open');
    document.querySelector('.content-body')?.classList.remove('console-open');
  } else {
    $console.classList.add('open');
    document.querySelector('.content-body')?.classList.add('console-open');
  }

  let title = data.title;
  let filteredLogs = logs;
  if (filterText && filterText.length) {
    filteredLogs = logs.filter(l => l.msg.toLowerCase().includes(filterText.toLowerCase()));
  }
  // Only top 10 visible
  filteredLogs = filteredLogs.slice(0, 10);

  let html = '';
  // Header
  html += `<div class="console-header" id="consoleHeaderToggle">
            <span class="console-header-title">üêõ ${title}</span>
            <span class="console-header-actions">
              <button class="console-toggle-btn" id="consoleFilterToggle" title="Filter logs">üîç</button>
              <button class="console-toggle-btn" id="consoleJsonToggle" title="Show config">{}</button>
              <button class="console-toggle-btn" id="consoleMinToggle" title="Close console">‚ñº</button>
            </span>
          </div>`;
  // Filter input
  html += floatingConsoleState.filterOpen ? `<div class="console-filter-container"><input type="text" class="console-filter-input" id="consoleFilterInput" value="${filterText}" placeholder="–§–∏–ª—å—Ç—Ä –ø–æ –ª–æ–≥–∞–º..." /></div>` : '';
  // Logs
  html += `<div class="console-logs">`;
  if (!filteredLogs.length) {
    html += `<div style="color:#888;margin:16px 0;">–ù–µ—Ç –ª–æ–≥–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>`;
  } else {
    filteredLogs.forEach(log => {
      let icon = '';
      switch (log.type) {
        case 'success': icon = '‚úì'; break;
        case 'error': icon = '‚ùå'; break;
        case 'warning': icon = '‚ö†Ô∏è'; break;
        case 'info':
        default: icon = '‚ÑπÔ∏è';
      }
      html += `<div class="log-line log-${log.type}" data-txt="${log.msg}" tabindex="0"><span class="log-timestamp">${log.ts}</span><span>${icon}</span> <span>${log.msg}</span></div>`;
    });
  }
  html += `</div>`;

  // JSON Panel
  html += `<div class="console-json-toggle" id="consoleJsonToggleBtn">{}</div>`;
  html += `<div class="console-json-panel${jsonPanelOpen ? ' open' : ''}" id="consoleJsonPanel">${syntaxHighlight(data.jsonPanel)}</div>`;
  $console.innerHTML = html;

  // Events
  setTimeout(() => {
    // Close console
    document.getElementById('consoleMinToggle')?.addEventListener('click', (e) => {
      e.stopPropagation();
      floatingConsoleState.minimized = true;
      floatingConsoleState.sessionMinimized = true;
      updateConsoleToggleButton();
      renderDebugConsole(section, logs, filterText, jsonPanelOpen);
    });
    
    // Header click to close
    document.getElementById('consoleHeaderToggle')?.addEventListener('click', () => {
      floatingConsoleState.minimized = true;
      floatingConsoleState.sessionMinimized = true;
      updateConsoleToggleButton();
      renderDebugConsole(section, logs, filterText, jsonPanelOpen);
    });
    // Filter toggle
    document.getElementById('consoleFilterToggle')?.addEventListener('click', (e) => {
      e.stopPropagation();
      floatingConsoleState.filterOpen = !floatingConsoleState.filterOpen;
      renderDebugConsole(section, logs, filterText, jsonPanelOpen);
      if (floatingConsoleState.filterOpen) {
        setTimeout(()=>{
        document.getElementById('consoleFilterInput')?.focus();
        }, 60);
      }
    });
    // Filter input
    document.getElementById('consoleFilterInput')?.addEventListener('input', e => {
      getActiveConsoleManager().filter(e.target.value);
      floatingConsoleState.filterText = e.target.value;
    });
    // Click log line = copy
    $console.querySelectorAll('.log-line').forEach(line => {
      line.addEventListener('click', e => {
        const txt = line?.dataset?.txt || '';
        navigator.clipboard.writeText(txt).then(()=> {
          line.style.background = 'rgba(145,215,168,0.12)';
          setTimeout(()=> line.style.background='', 210);
        });
      });
    });
    // Hover highlight
    $console.querySelectorAll('.log-line').forEach(line => {
      line.addEventListener('mouseenter', e => {
        line.style.background = 'rgba(255,255,255,0.07)';
      });
      line.addEventListener('mouseleave', e => {
        line.style.background = '';
      });
    });
    // JSON toggle
    document.getElementById('consoleJsonToggleBtn')?.addEventListener('click', (e) => {
      e.stopPropagation();
      floatingConsoleState.jsonPanel = !floatingConsoleState.jsonPanel;
      getActiveConsoleManager().jsonPanelOpen = floatingConsoleState.jsonPanel;
      renderDebugConsole(section, logs, filterText, floatingConsoleState.jsonPanel);
    });
  }, 40);
}

// ----------- Section Change Integration ----------- //
function updateConsoleSection(section) {
  floatingConsoleState.currentSection = section;
  // Save minimized per session (in global var)
  floatingConsoleState.minimized = floatingConsoleState.sessionMinimized;
  floatingConsoleState.filterOpen = false;
  floatingConsoleState.filterText = '';
  floatingConsoleState.jsonPanel = false;
  getActiveConsoleManager().render();
}

// ----------- Update Console Toggle Button State ----------- //
function updateConsoleToggleButton() {
  const btn = document.getElementById('consoleToggleMain');
  if (!btn) return;
  
  if (floatingConsoleState.minimized) {
    btn.classList.remove('active');
    btn.querySelector('span:first-child').textContent = '‚ñº';
  } else {
    btn.classList.add('active');
    btn.querySelector('span:first-child').textContent = '‚ñ≤';
  }
}

// ----------- Main Console Toggle (Control Bar Button) ----------- //
function initMainConsoleToggle() {
  const btn = document.getElementById('consoleToggleMain');
  if (!btn) return;
  
  btn.addEventListener('click', () => {
    floatingConsoleState.minimized = !floatingConsoleState.minimized;
    floatingConsoleState.sessionMinimized = floatingConsoleState.minimized;
    updateConsoleToggleButton();
    getActiveConsoleManager().render();
  });
  
  // Keyboard shortcut: Esc to close console
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !floatingConsoleState.minimized) {
      floatingConsoleState.minimized = true;
      floatingConsoleState.sessionMinimized = true;
      updateConsoleToggleButton();
      getActiveConsoleManager().render();
    }
  });
}

// ----------- Integration into Navigation / Sections ----------- //
const navIntegration = () => {
  // On page load, set current section
  floatingConsoleState.minimized = true;
  floatingConsoleState.sessionMinimized = true;
  updateConsoleSection(appState.currentSection || 'dashboard');
  updateConsoleToggleButton();
  
  // Initialize main console toggle
  initMainConsoleToggle();
  
  // Listen for section change (sidebar)
  document.querySelectorAll('.nav-item').forEach(el => {
    el.addEventListener('click', function() {
      const section = this.getAttribute('data-section');
      if (section) updateConsoleSection(section);
    });
  });
  
  // Hide console on mobile/resize
  window.addEventListener('resize', () => {
    getActiveConsoleManager().render();
    updateConsoleToggleButton();
  });
};

// ----------- Real-Time Log Simulation (Auto) ----------- //
setInterval(() => {
  const c = getActiveConsoleManager();
  let logSim;
  switch (floatingConsoleState.currentSection) {
    case 'dashboard':
      logSim = [
        { msg: '‚Ñπ Connection alive', type: 'info' },
        { msg: '‚úì Heartbeat acknowledged', type: 'success' },
        { msg: '‚ö† Robot #3 high temp', type: 'warning' },
        { msg: '‚úì Items sorted: batch complete', type: 'success' }
      ];
      break;
    case 'operators':
      logSim = [
        { msg: '‚Ñπ Manual check performed', type: 'info' },
        { msg: '‚úì Robot UR20-001 started', type: 'success' },
        { msg: '‚ö† Temporary error cleared', type: 'warning' },
        { msg: '‚ùå E-Stop clicked', type: 'error' }
      ];
      break;
    case 'developers':
      logSim = [
        { msg: '‚Ñπ Diagnostic scan run', type: 'info' },
        { msg: '‚úì Model retrained', type: 'success' },
        { msg: '‚ö† Outlier detected', type: 'warning' },
        { msg: '‚ùå Memory spike detected', type: 'error' }
      ];
      break;
    case 'demo':
      logSim = [
        { msg: '‚úì Demo loop executed', type: 'success' },
        { msg: '‚Ñπ AI Vision updated', type: 'info' },
        { msg: '‚ö† Demo latency high', type: 'warning' },
        { msg: '‚úì Showcase step', type: 'success' }
      ];
      break;
    case 'settings':
      logSim = [
        { msg: '‚Ñπ Settings saved', type: 'info' },
        { msg: '‚úì Audit record: Theme switch', type: 'success' },
        { msg: '‚ö† Login retry', type: 'warning' },
        { msg: '‚úì User config updated', type: 'success' }
      ];
      break;
  }
  const sim = logSim[Math.floor(Math.random() * logSim.length)];
  if (c) c.log(sim.msg, sim.type);
}, 9000);

// On load
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', navIntegration);
} else {
  navIntegration();
}
</script>
</body>
</html>
